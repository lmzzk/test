function number_format(t,l,o,i){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+t)?+t:0,a=isFinite(+l)?Math.abs(l):0,n="undefined"==typeof i?",":i,s="undefined"==typeof o?".":o,r="",h=function(t,l){var o=Math.pow(10,l);return""+Math.round(t*o)/o};return r=(a?h(e,a):""+Math.round(e)).split("."),r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),(r[1]||"").length<a&&(r[1]=r[1]||"",r[1]+=new Array(a-r[1].length+1).join("0")),r.join(s)}var dkqx_option=RCal.dkqxOption,dklv_option=RCal.lilvOption;obj_dkqx_sel=new Combox("DataYear","DataYear",dkqx_option,360,168,29,{listDivId:"dkqx_list_1",onchange:function(){CalculatorHkbj.cal_lv()}}),obj_dklv_sel=new Combox("DataLilv","DataLilv",dklv_option,1,168,29,{listDivId:"dkqx_list_1",onchange:function(){CalculatorHkbj.cal_lv()}});var CalculatorHkbj={els:{money:$("#DataMoney"),year:$("input[name=DataYear]"),lilv:$("#dklv"),lilvBs:$("input[name=DataLilv]"),xiFirst:$("#ResultXiFirst"),xiLast:$("#ResultXiLast"),xiAll:$("#ResultXiAll"),jinFirst:$("#ResultJinFirst"),jinLast:$("#ResultJinLast"),jinAll:$("#ResultJinAll"),run:$("#Run")},init:function(){var t=this;this.els.run.click(function(){if(""==t.els.money.val())alert("贷款总额不能为空！");else{var l={money:t.els.money.val(),year:t.els.year.val(),lilv:parseFloat(t.els.lilv.val())},o=window.CalculatorResult={money:l.money,year:l.year,lilv:l.lilv};t.doXi(l,o),t.doJin(l,o),$(".save-result-btn").show();var i=$(window.opera?"CSS1Compat"==document.compatMode?"html":"body":"html,body");$.browser.webkit&&(i=$("body"));var e=$(".save-result-btn").offset().top;i.animate({scrollTop:e},350)}}),$(".recalculate").each(function(){$(this).click(function(){var t=$(window.opera?"CSS1Compat"==document.compatMode?"html":"body":"html,body");$.browser.webkit&&(t=$("body"));var l=$("#content-main").offset().top;t.animate({scrollTop:l},350)})}),$(".input-block .yt-list").click(function(){t.cal_lv()}),t.cal_lv()},cal_lv:function(){var t=this,l=t.els.lilvBs.val(),o=t.els.year.val(),i=RCal.getLilv(o,l);t.els.lilv.val(i+"%")},doXi:function(t,l){var o=1e4*t.money,i=t.lilv,e=t.year,a=e,n=i/100/12,s={};s.monthMoney=(o*n*Math.pow(1+n,a)/(Math.pow(1+n,a)-1)).toFixed(2),s.allMoney=(s.monthMoney*a).toFixed(2),s.interest=(s.allMoney-o).toFixed(2),this.els.xiFirst.html(this.toNum(s.monthMoney,1)),this.els.xiLast.html(this.toNum(s.monthMoney,1)),this.els.xiAll.html(this.toNum(s.allMoney,1)),l.xiFirst=this.toNum(s.monthMoney,1),l.xiLast=this.toNum(s.monthMoney,1),l.xiAll=this.toNum(s.allMoney,1)},doJin:function(t,l){var o,i,e=t.money,a=t.lilv/100,n=t.year,s=1,r=1e4*e,h=a/12,u=1*n;o={money:this.toNum(r,s),month:this.toNum(u,s),per:this.toNum(r*h*Math.pow(1+h,u)/(Math.pow(1+h,u)-1),s),ext:this.toNum(r*u*h*Math.pow(1+h,u)/(Math.pow(1+h,u)-1)-r,s),total:this.toNum(r*u*h*Math.pow(1+h,u)/(Math.pow(1+h,u)-1),s)},i={money:this.toNum(r,s),month:this.toNum(u,s),per:this.toNum(r*(1+u*h)/u,s),perA:this.toNum(r*h/u,s),ext:this.toNum((u+1)*r*h/2,s),total:this.toNum(r+(u+1)*r*h/2,s),last:this.toNum(r/n*a/12+r/n,s)},this.els.jinFirst.html(i.per),this.els.jinLast.html(i.last),this.els.jinAll.html(i.total),l.jinFirst=i.per,l.jinLast=i.last,l.jinAll=i.total},toNum:function(t,l){return t=Number(t),t?l?number_format(Math.round(1e3*t)/1e3,0,"",","):Math.round(1e3*t)/1e3:""}};CalculatorHkbj.init();